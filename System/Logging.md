# System Logging

System logging is a critical component of Linux administration that provides centralized collection, processing, and storage of log messages from various system components and applications. Logs are essential for:

- **System monitoring** - Track system performance and health
- **Troubleshooting** - Diagnose problems and errors
- **Security auditing** - Monitor unauthorized access attempts
- **Compliance** - Meet regulatory requirements
- **Forensic analysis** - Investigate security incidents

Linux uses the syslog standard to handle logging in a structured and consistent manner across different services and applications.

## Table of Contents
- [System Logging](#system-logging)
  - [Table of Contents](#table-of-contents)
  - [Syslog Standard](#syslog-standard)
    - [Common Facilities](#common-facilities)
    - [Syslog Servers](#syslog-servers)
  - [Logging Rules](#logging-rules)
  - [Caching vs Non-caching](#caching-vs-non-caching)
  - [Logger Command](#logger-command)
  - [logrotate](#logrotate)

## Syslog Standard
- Aids in the processing of messages
- Allows logging to be centrally controlled
- Uses facilities and severities to categorize messages

### Common Facilities
- kern: Kernel messages
- user: User-level messages
- mail: Mail system messages
- daemon: System daemons
- auth: Security/authentication messages
- syslog: Messages generated by syslogd
- cron: Clock daemon messages
- local0-local7: Locally defined facilities

### Syslog Servers
- Process syslog messages based on rules
- syslogd
- rsyslog
  - /etc/rsyslog.conf
- syslog-ng

## Logging Rules
- Selector field
  - FACILITY.SEVERITY
  - mail.*
  - mail
  - FACILITY.none
  - FACILITY_1.SEVERITY;FACILITY_2.SEVERITY;
- Action field
  - Determines how a message is processed

**Example Logging Rule**
mail.* /var/log/mail.log
mail.info -/var/log/mail.info
mail.warn -/var/log/mail.warn
mail.error /var/log/mail.error

All messages from auth,authpriv.* is written to /var/log/auth.log
```
auth,authpriv.* /var/log/auth.log
```

All messages except from auth,authpriv.* is written to /var/log/auth.log
```
*.*;auth.none;authprive.none -/var/log/syslog
```

## Caching vs Non-caching
- Caching is used if the path starts with a hypen
  - mail.info -/var/log/mail.info
- You may lose some messages during a system crash if you are using caching mode
- Using caching mode can improve I/O performance

## Logger Command
```
logger [options] message
```
Options:
-p FACILITY.SEVERITY
-t TAG

```
logger -p mail.info -t mailtest "Test."
```

## logrotate
To compress, remove or mail log file.
- /etc/logrotate.conf

Example logrotate.conf
```
weekly
rotate 4
create
compressed
include /etc/logrorate.d
```